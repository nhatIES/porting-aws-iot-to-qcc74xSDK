sdk_add_subdirectory_ifdef(CONFIG_FREERTOS freertos)

if(CONFIG_TICKLESS_WIFI)
    sdk_generate_library(tickless)
    sdk_library_add_sources(tickless/tickless_v1.c)
    sdk_add_compile_definitions(-DLP_APP)
    sdk_add_compile_definitions(-DconfigUSE_TICKLESS_IDLE=1)
    sdk_add_compile_definitions(-Dconfig_CUSTOM_TICKLESS=1)
    sdk_add_compile_definitions(-DconfigEXPECTED_IDLE_TIME_BEFORE_SLEEP=40)
    sdk_add_compile_definitions(-DWPA_SUPPLICANT_CLEANUP_INTERVAL=1800)
    sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_SOC_DEFAULT=11)
    sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_AON_DEFAULT=10)
    sdk_add_compile_definitions(-DLP_RAM_REUSE=1)
    sdk_add_compile_definitions(-DCONFIG_LPFW_INIT_SKIP_COPY=1)

    if (CONFIG_DCDC_ENABLE)
        sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_RT_DEFAULT=8)
    else ()
        sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_RT_DEFAULT=10)
    endif ()
endif()

if(CONFIG_TICKLESS_WIFI_BLE)
    sdk_generate_library(tickless)
    sdk_library_add_sources(tickless/tickless_v2.c)
    sdk_add_compile_definitions(-DLP_APP)
    sdk_add_compile_definitions(-DconfigUSE_TICKLESS_IDLE=1)
    sdk_add_compile_definitions(-Dconfig_CUSTOM_TICKLESS=2)
    #sdk_add_compile_definitions(-DconfigEXPECTED_IDLE_TIME_BEFORE_SLEEP=40)
    sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_SOC_DEFAULT=11)
    sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_AON_DEFAULT=10)
    sdk_add_compile_definitions(-DLP_RAM_REUSE=1)
    sdk_add_compile_definitions(-DCONFIG_LPFW_INIT_SKIP_COPY=1)

    if (CONFIG_ACTIVE_CRYSTAL)
        sdk_add_compile_definitions(-DCFG_ACTIVE_CRYSTAL)
    endif ()

    if (CONFIG_DCDC_ENABLE)
        sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_RT_DEFAULT=8)
    else ()
        sdk_add_compile_definitions(-DPM_PDS_LDO_LEVEL_RT_DEFAULT=10)
    endif ()
endif()
